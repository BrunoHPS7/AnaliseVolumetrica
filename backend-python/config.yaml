# Define o que será executado: "OpenCV", "Reconstruction", "CameraCalibration", "Full"
execution_mode: "CameraCalibration"

# Configurações de Caminhos (Paths)
paths:
  # Calibração
  calibration_input_folder: "./data/in/images_calibration"
  calibration_output_folder: "./data/out/calibrations"

  # Extração (OpenCV)
  video_input: "./data/in/videos/Clio.mp4"
  frames_output: "./data/out/frames"

  # Reconstrução (Colmap)
  colmap_input: "./data/out/frames"
  colmap_output: "./data/out/reconstructions"
  resources: "./resources"
  
  # Volumes
  volumes_output: "./data/out/volumes"

# Parâmetros Técnicos dos Módulos
parameters:
  calibration:
    checkerboard_size: [9, 6]
    square_size: 25.0

  acquisition:
    desired_fps: 5

  bean_color:
    # OpenCV HSV (H: 0-179, S: 0-255, V: 0-255)
    hsv_target: [175, 155, 79]
    hsv_tolerance: [12, 80, 80]

    # Perfis de cor para diferentes tipos de feijão (união de todas as faixas)
    # Ajuste active_profiles conforme o tipo de feijão sendo medido.
    profiles:
      # Feijao vermelho/vinho na reconstrucao 3D (H~5-25, S alto, V baixo)
      vermelho_escuro:
        hsv_target: [15, 140, 70]
        hsv_tolerance: [12, 50, 48]
      carioca:
        hsv_target: [12, 140, 100]
        hsv_tolerance: [15, 50, 50]
      preto:
        hsv_target: [0, 20, 35]
        hsv_tolerance: [15, 30, 30]
    active_profiles: ["vermelho_escuro"]

    # Parâmetros de detecção espacial
    detection:
      voxel_downsample_fraction: 0.001
      stat_outlier_nb_neighbors: 20
      stat_outlier_std_ratio: 2.0
      dbscan_eps_fraction: 0.01
      dbscan_min_points: 20
      min_cluster_fraction: 0.10
      ground_plane_distance_fraction: 0.002
      ground_plane_ransac_n: 3
      ground_plane_iterations: 1500
      min_height_above_ground: 0.0

    # Melhorias no heightmap
    heightmap:
      gaussian_sigma: 1.0
      fill_holes: true
      fill_max_radius: 3
